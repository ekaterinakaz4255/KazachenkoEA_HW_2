# ДОМАШНЕЕ ЗАДАНИЕ 2

### Ваша задача — проверить, как изменился мир тенниса за последнее время. 

Для анализа используйте этот [датасет](https://github.com/JeffSackmann/tennis_atp). Применяйте только данные из одиночного разряда (файлы в формате ```atp_matches_YYYY.csv```). Желательно сопровождать выбранный статистический тест ссылкой на его документацию и указывать нулевую гипотезу, которую этот тест проверяет. Далеко не всегда это очевидно.


#### 1. Вы хотите узнать, как много значит ранг игрока в теннисе. Проверьте следующие утверждения:

    а) Если ранг игрока выше более, чем на 20 позиций, то в среднем он будет выигрывать с большей вероятностью. (Если хотите проверить статистически — формируйте выборку как отклонение от ожидаемого количества побед при случайном исходе);

    б) Если ранг игрока находится в окне +-5 позиций, то вероятность победы будет значительно отличаться от гипотезы из предыдущего случая. Для проверки статистической значимости выборку можно сделать как среднее по годам (например, с 1980 по 2022г.). Подумайте, как правильно сформировать репрезентативную выборку.

#### 2. Правда ли, что среднее количество сетов, которое необходимо любому игроку для победы в матче, сокращается со временем? 
Разбейте данные на две группы — с 1980 до 2001 гг. и 2002-2022 гг. Как изменилось среднее количество сетов, которое победитель затратил на игру? Является ли разница средних этих двух выборок статистически значимой? Выбор статистического теста обоснуйте.

#### 3. У вас появились сомнения — не является ли результат, который вы посчитали на предыдущем шаге, некорректным. 
Кажется, что на это мог повлиять формат самого матча — best of 3 или best of 5. Оставьте только матчи best of 5 (колонка best_of) и определите — является ли разница среднего количества сетов, которое сыграл победитель, значимой для выборок матчей по 1980 до 2001 гг. и 2002-2022 гг. Выбор статистического теста обоснуйте.

#### 4. Вы хотите изучить психологическую устойчивость профессиональных игроков в теннис. 
Одним из важных показателей такой устойчивости будет доля выигранных брейк-поинтов. Возьмите трех игроков (они необязательно должны играть в одно и то же время. Можете взять игроков, которые сильно отличаются по рангу, а можете взять примерно равных игроков), для каждого из них посчитайте долю выигранных брейк поинтов (колонки, заканчивающиеся на bpFaced и bpSaved) отдельно в победных и проигранных матчах за минимум 10 лет (можно больше, но годы должны идти подряд). Постройте box-plot’ы для этих статистик для каждого из игроков. Являются ли эти распределения по годам (по победным и по проигранным матчам) независимыми для каждого из игроков? Если сравнивать эту статистику между игроками — будет ли разница в средних для проигранных и выигранных матчей значимой попарно между всеми игроками? Выбор статистического теста обоснуйте.

#### 5. У вас есть гипотеза, что доля выигранных брейк-поинтов связана с вероятностью победить в игре. 
Соберите статистику, где для каждого матча будет собран его исход (победа/поражение) и доля выигранных брейк-поинтов (не забудьте, что в матче два игрока). Разделите долю выигранных брейкпоинтов на группы выше/ниже медианы и, используя информацию о исходе матча, проверьте зависимость между количеством выигранных брейкпоинтов и результатом матча. Насколько сильна эта зависимость? Выбор статистического теста обоснуйте.

## ВАМ НЕОБХОДИМО:
В ячейке с кодом написать решение в виде кода на языке Python. Ограничения в использовании библиотек/функций: Нет, при желании можно пользоваться pandasql для обработки данных. Не забывайте про PEP8.


## В КАКОМ ФОРМАТЕ ПРИСЛАТЬ РЕЗУЛЬТАТ:
Ссылка на Github с ноутбуком или ссылка на ваш Colab с решениями (не колаб преподавателя).


## КРИТЕРИЙ ОЦЕНКИ РЕЗУЛЬТАТА:
### Критерий 1. Правильность решения.

 - Необходимо убедиться, что данные обработаны верно, выдача соответствует условию задачи.
 - Любая ошибка в выборе статистического теста — -1 балл за задачу.
 - Если сделан t-test — должно быть обоснование, что размер выборки достаточен (>30 семплов), статистика распределена нормально (displot/histplot/distplot/QQ-plot и т.д.), проверено равенство дисперсий в случае парного Т-теста (сделан тест Фишера, либо это совсем очевидно).
 - Остальные тесты не требуют особых доказательств, достаточно какой-либо цитаты о том, где применяется тест или ссылки на документацию, например, так.
 - Измененная задача/текст или условия задачи/assert — 0 баллов за задачу.

 |  |  |
|:------------|:-----------:|
| Задача решена верно        | 2 балла       |
| Ошибка в выборе статистического теста или другая минорная ошибка       | 1 балл за задачу (при условии, что всё остальное верно)       |
| Задача решена неверно (используются неверные выборки — нарушена последовательность в годах, ошибка в расчетах, перепутаны игроки и т.д.)       | 0 баллов       |


 ### Критерий 2. Правильность оформления решения по PEP8.

 |  |  |
|:------------|:-----------:|
| Код красивый и правильный, есть несколько мелких помарок        | 10 баллов       |
| Нарушения PEP8 примерно в 20% случаев       | 8 баллов       |
| Нарушения PEP8 примерно в 50% случаев       | 5 баллов       |
| PEP8 нет       | 0 баллов       |
